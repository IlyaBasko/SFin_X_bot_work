# Документация проекта: Интернет-магазин чая Tea-Shop
## Участники проекта
- Наместников К.А. - 5130904/30104
- Баско И.Л. - 5140904/30104
## Определение проблемы
Существующие интернет-магазины чая часто используют устаревшие монолитные архитектуры, что затрудняет разработку, тестирование и масштабирование. При добавлении новых функций или изменении существующих приходится перестраивать всё приложение целиком, что увеличивает время разработки и риск возникновения ошибок. Необходима модульная система с четким разделением ответственности компонентов.

## Выработка требований

### Функциональные требования
1. **Управление каталогом товаров**
   - Система должна предоставлять каталог чайных продуктов с категориями (черный, зеленый, улун, травяной)
   - Для каждого товара должны храниться: название, описание, цена, вес, страна происхождения, сорт, время заваривания
   - Возможность фильтрации товаров по категориям, цене, стране происхождения

2. **Система корзины покупок**
   - Пользователи должны иметь возможность добавлять товары в корзину, изменять количество, удалять товары
   - Корзина должна сохраняться между сессиями (через cookies или учетную запись)
   - Расчет общей стоимости заказа с учетом количества товаров

3. **Оформление и управление заказами**
   - Процесс оформления заказа с указанием данных для доставки (адрес, контакты, способ доставки)
   - Разделение статусов заказа: "новый", "в обработке", "отправлен", "доставлен", "отменен"
   - Личный кабинет пользователя с историей заказов

4. **Административная панель**
   - Управление товарами (добавление, редактирование, удаление)
   - Управление заказами (просмотр, изменение статуса)
   - Просмотр базовой аналитики (популярные товары, общая выручка)

5. **Тестирование и развертывание**
   - Полное покрытие unit-тестами всех основных модулей
   - Docker-контейнеризация всех компонентов системы
   - Возможность запуска всего стека одной командой

### Пользовательские сценарии

**Сценарий 1: Покупка чая новым пользователем**
1. Пользователь заходит на сайт tea-shop
2. Просматривает каталог, используя фильтры по категориям и цене
3. Выбирает "Зеленый чай с жасмином" (200г, Китай) и добавляет 2 шт в корзину
4. Добавляет "Улун Молочный" (100г, Тайвань) - 1 шт в корзину
5. Переходит в корзину, видит общую сумму 2450 руб
6. Заполняет форму доставки: адрес, телефон, email
7. Подтверждает заказ, получает номер заказа №TS-20250115-001
8. Получает email с подтверждением заказа

**Сценарий 2: Администратор добавляет новый товар**
1. Администратор входит в панель управления
2. Переходит в раздел "Товары" → "Добавить товар"
3. Заполняет данные: название "Пуэр выдержанный", категория "Черный чай", цена 1800 руб, вес 357г, страна "Китай", описание "Выдержка 5 лет..."
4. Загружает изображение товара
5. Сохраняет товар, система автоматически добавляет его в каталог

**Сценарий 3: Проверка статуса заказа**
1. Пользователь заходит в личный кабинет
2. Видит список своих заказов с текущими статусами
3. Видит заказ №TS-20250115-001 со статусом "отправлен" и трек-номером
4. Через 2 дня проверяет снова - статус изменился на "доставлен"

### Оценка масштаба
- **Целевая аудитория**: 10,000 уникальных посетителей в месяц
- **Активные пользователи**: ~500 пользователей в сутки
- **Средний чек**: 1,500 рублей
- **Прогнозируемое количество заказов**: 100-150 заказов в день
- **Период хранения данных**: 5 лет (для аналитики и истории заказов)

## Расчет нагрузки

### Характер нагрузки
Система интернет-магазина имеет **высокое соотношение чтения к записи** - примерно **85% на 15%**.

### Read-операции (85% нагрузки)
- **Просмотр каталога товаров**: 75 запросов/час × 24 = 1,800 в день
- **Частота**: каждые 48 секунд от активных пользователей
- **Просмотр страницы товара**: 50 запросов/час × 24 = 1,200 в день
- **Проверка корзины**: 30 запросов/час × 24 = 720 в день
- **Просмотр статуса заказа**: 20 запросов/час × 24 = 480 в день

**Итого read-операций в день**: 1,800 + 1,200 + 720 + 480 = **4,200 операций**

### Write-операции (15% нагрузки)
- **Добавление в корзину**: 25 операций/час × 24 = 600 в день
- **Оформление заказа**: 10 операций/час × 24 = 240 в день (соответствует 150 заказам/день)
- **Изменение данных админом**: 5 операций/час × 24 = 120 в день
- **Регистрация пользователей**: 3 операции/час × 24 = 72 в день

**Итого write-операций в день**: 600 + 240 + 120 + 72 = **1,032 операции**

### Итоговая нагрузка
- **Всего операций в день**: 4,200 + 1,032 = **5,232 операции**
- **Пиковая нагрузка** (дневное время 12:00-20:00): до 800 операций/час
- **Средний размер ответа API**: 5-10 КБ
- **Суточный трафик**: ~50-100 МБ
- **Объем данных за 5 лет**: ~50 ГБ (товары + заказы + пользователи)

### Показатели производительности
- **Время отклика API**: < 200 мс для 95% запросов
- **Доступность системы**: 99.5% (плановые работы - исключение)
- **Максимальное время простоя**: 4 часа в месяц

### API Контракты

```http
### Каталог товаров
GET /api/v1/products/
Response: 200 OK
{
  "products": [
    {
      "id": 101,
      "name": "Зеленый чай с жасмином",
      "category": "green",
      "price": 450,
      "weight": 200,
      "country": "Китай",
      "brew_time": "3-4 минуты"
    }
  ]
}
Требование: время ответа < 150мс

### Добавление в корзину
POST /api/v1/cart/add/
Body: {"product_id": 101, "quantity": 2}
Response: 201 Created
{
  "cart_total": 900,
  "items_count": 2
}
Требование: время ответа < 200мс

### Создание заказа
POST /api/v1/orders/create/
Body: {
  "items": [{"product_id": 101, "quantity": 2}],
  "delivery_address": "ул. Примерная, д. 1",
  "phone": "+79161234567"
}
Response: 201 Created
{
  "order_id": "TS-20250115-001",
  "status": "new",
  "total": 900
}
Требование: время ответа < 300мс
